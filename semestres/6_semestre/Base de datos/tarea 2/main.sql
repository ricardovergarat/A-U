DROP TABLE BOLETA;
DROP TABLE PRODUCTO;
DROP TABLE CATEGORIA;
DROP TABLE CLIENTE;


CREATE TABLE CATEGORIA(
    CODIGO_CATEGORIA NUMBER NOT NULL,
    NOMBRE_CATEGORIA VARCHAR2(20)
);

CREATE TABLE PRODUCTO(
    CODIGO_PRODUCTO NUMBER NOT NULL,
    NOMBRE VARCHAR2(29),
    PRECIO NUMBER,
    CODIGO_CATEGORIA NUMBER NOT NULL,
    STOCK NUMBER
);

CREATE TABLE CLIENTE(
    RUT NUMBER NOT NULL,
    NOMBRE VARCHAR2(30),
    APELLIDO VARCHAR2(50),
    CORREO VARCHAR2(50) UNIQUE,
    EDAD NUMBER
);

CREATE TABLE BOLETA(
    CODIGO_BOLETA NUMBER NOT NULL,
    RUT NUMBER NOT NULL,
    CODIGO_PRODUCTO NUMBER NOT NULL,
    FECHA DATE,
    CANTIDAD NUMBER,
    TOTAL NUMBER
);

-- creacion de las PK
ALTER TABLE CATEGORIA ADD CONSTRAINT PK_CATEGORIA PRIMARY KEY(CODIGO_CATEGORIA);
ALTER TABLE PRODUCTO ADD CONSTRAINT PK_PRODUCTOS PRIMARY KEY(CODIGO_PRODUCTO);
ALTER TABLE CLIENTE ADD CONSTRAINT PK_CLIENTE PRIMARY KEY(RUT);
ALTER TABLE BOLETA ADD CONSTRAINT PK_BOLETA PRIMARY KEY(CODIGO_BOLETA,RUT,CODIGO_PRODUCTO);

-- creacion de la FK
ALTER TABLE PRODUCTO ADD CONSTRAINT FK_PRODUCTO FOREIGN KEY(CODIGO_CATEGORIA) REFERENCES CATEGORIA(CODIGO_CATEGORIA);
ALTER TABLE BOLETA ADD CONSTRAINT FK_BOLETA_CLIENTE FOREIGN KEY(RUT) REFERENCES CLIENTE(RUT);
ALTER TABLE BOLETA ADD CONSTRAINT FK_BOLETA_PRODUCTO FOREIGN KEY(CODIGO_PRODUCTO) REFERENCES PRODUCTO(CODIGO_PRODUCTO);


INSERT INTO CATEGORIA VALUES(1,'notbook');
INSERT INTO CATEGORIA VALUES(2,'celular');
INSERT INTO CATEGORIA VALUES(3,'tablet');
INSERT INTO CATEGORIA VALUES(4,'monitor');
INSERT INTO CATEGORIA VALUES(5,'TV');

INSERT INTO PRODUCTO VALUES (200,'celular lenovo',549000,2,49);
INSERT INTO PRODUCTO VALUES (73,'TV njoy tech',681000,5,34);
INSERT INTO PRODUCTO VALUES (212,'notbook HP',732000,1,45);
INSERT INTO PRODUCTO VALUES (92,'tablet asus',293000,3,60);
INSERT INTO PRODUCTO VALUES (161,'monitor tencent',603000,4,51);
INSERT INTO PRODUCTO VALUES (213,'notbook nvidia',500000,1,3);

INSERT INTO CLIENTE VALUES (20122164,'Isabel','Noon','Isabel_Noon2126743066@supunk.biz',28);
INSERT INTO CLIENTE VALUES (20130730,'Daniel','Martin','Daniel_Martin1260689885@guentu.biz',13);
INSERT INTO CLIENTE VALUES (20133549,'Maia','Benfield','Maia_Benfield386710409@bretoux.com',26);
INSERT INTO CLIENTE VALUES (20144110,'Noah','Thomson','Noah_Thomson1113528136@hourpy.biz',32);
INSERT INTO CLIENTE VALUES (20147737,'Andrea','Smith','Andrea_Smith1046051997@corti.com',35);

INSERT INTO BOLETA VALUES(1,20122164,212,'2/3/2020',1,732000);
INSERT INTO BOLETA VALUES(2,20130730,161,'28/1/2020',1,603000);
INSERT INTO BOLETA VALUES(3,20133549,92,'26/5/2020',2,586000);
INSERT INTO BOLETA VALUES(4,20144110,200,'10/8/2020',3,1623000);
INSERT INTO BOLETA VALUES(5,20147737,73,'4/10/2020',1,681000);